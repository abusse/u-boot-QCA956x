<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <style type="text/css">
        /*reset YUI3*/

        html {
            font-family: Verdana, Geneva, sans-serif;
            font-size: 12px;
            color: #4d4d4d;
        }

        body,
        div,
        dl,
        dt,
        dd,
        ul,
        ol,
        li,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        pre,
        code,
        form,
        fieldset,
        legend,
        input,
        textarea,
        p,
        blockquote,
        th,
        td {
            margin: 0;
            padding: 0;
        }

        body {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            cursor: default;
            overflow-y: hidden;
            overflow-x: auto;
        }

        input,
        button {
            font-family: Verdana, Geneva, sans-serif;
            color: #4d4d4d;
            border: 0px none;
            background-color: transparent;
            cursor: pointer;
        }

        label,
        span,
        a {
            vertical-align: middle;
        }

         ::-webkit-scrollbar {
            width: 13px;
            border: 1px solid #ffffff;
        }

         ::-webkit-scrollbar-button {
            height: 3px;
            background-color: #ffffff;
        }

         ::-webkit-scrollbar-track {
            background-color: #ffffff;
            width: 9px;
        }

         ::-webkit-scrollbar-track-piece {
            background-color: #ffffff;
        }

         ::-webkit-scrollbar-thumb {
            background: #9BDCEB;
            border-radius: 35px;
            border: 3px solid #ffffff;
        }

         ::-webkit-scrollbar-thumb:hover {
            background: #9BDCEB;
        }

         ::-webkit-scrollbar-corner {
            background: #ffffff;
        }

         ::-webkit-scrollbar-resizer {
            background: rgb(200, 200, 200);
        }

        body,
        p {
            margin: 0;
        }
        /*css*/

        div.top {
            width: 100%;
            height: 100%;
            min-width: 980px;
            display: block;
        }

        div.top-header {
            background-color: #4acbd6;
            height: 90px;
        }

        div.top-header-wrap {
            width: 980px;
            margin: 0 auto;
            color: #ffffff;
        }

        #tp-tag {
            font-size: 30px;
            padding-top: 21px;
            padding-left: 5px;
        }

        #product-tag {
            font-size: 12px;
            height: 16px;
            padding: 2px 0 12px 10px;
        }

        .top-content {
            width: 760px;
            position: relative;
            margin: 0 auto;
        }

        #upgrade-container {
            margin-top: 94px;
        }

        .error-note-container {
            width: 570px;
            margin: 0 auto;
        }

        div.file-container {
            margin: 5px 0;
        }

        div.file-container div.fieldlabel-wrap {
            width: 174px;
            display: inline-block;
            vertical-align: middle;
        }

        div.file-container div.file-wrap-outer {
            position: relative;
            display: inline-block;
            vertical-align: middle;
        }

        div.file-container div.file-wrap {
            position: relative;
            display: inline-block;
            border: 0 none;
            background-color: transparent;
        }

        div.file-container div.file-text-wrap {
            z-index: 2;
            background-color: #f5f5f5;
            border: 1px solid #e6e6e6;
            position: relative;
            display: inline-block;
            padding: 1px;
        }

        input.file-input {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            line-height: 22px;
            line-height: 32px\0;
            opacity: 0;
            background-color: #ffffff;
            cursor: pointer;
            z-index: -1;
            z-index: 1\0;
            filter: alpha(opacity=0)\0;
        }

        div.file-container .file-text-wrap2 {
            width: 197px;
            height: 26px;
            display: inline-block;
            padding: 1px;
            border: 1px solid #e6e6e6;
            z-index: -2;
            z-index: 3\0;
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            filter: alpha(opacity=0)\0;
            background-color: #f5f5f5;
            cursor: pointer;
        }

        .file-container .text-wrap {
            display: inline-block;
        }

        .file-container .file-text {
            width: 164px;
            height: 22px;
            line-height: 22px;
            padding: 2px 8px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            display: inline-block;
        }

        div.file-container div.file-button-wrap {
            z-index: 0;
            margin-left: 13px;
            display: inline-block;
            vertical-align: middle;
        }

        div.file-container .file-button {
            min-width: 80px;
            min-width: 62px\0;
            padding: 8px 6px 8px 6px;
            background-color: #ffcb00;
            color: #ffffff;
            border: 0 none;
            border-radius: 3px;
            outline: none;
            font-family: Verdana, Geneva, sans-serif;
            text-align: center;
        }

        div.file-container .file-button:hover {
            background-color: #f4b608;
        }

        .file-container .button-text {
            color: #ffffff;
        }

        div.button-container {
            text-align: right;
            margin: 5px 0;
        }

        #upgrade-button-container,
        #upgrade-file-container {
            display: inline-block;
        }

        div.button-container .button-wrap-outer {
            display: inline-block;
            position: relative;
        }

        div.button-container .button-wrap {
            border: 0 none;
            padding: 0;
        }

        div.button-container .button-button {
            padding: 8px 6px 8px 6px;
            background-color: #4acbd6;
            min-width: 90px;
            border-radius: 3px;
            outline: none;
            font-family: Verdana, Geneva, sans-serif;
            color: #ffffff;
            text-align: center;
            vertical-align: middle;
        }

        div.button-container .button-button.disabled,
        div.button-container .button-button.disabled:hover {
            background-color: #bfbfbf;
            cursor: not-allowed;
        }

        div.button-container .button-button:hover {
            background-color: #23c4c4;
        }

        div.progressbar-container {
            display: inline;
            padding: 0;
            margin: 5px 0;
        }

        div.progressbar-container .progressbar-wrap-outer {
            position: relative;
            display: inline-block;
        }

        div.progressbar-container .progressbar-wrap {
            border: 1px solid transparent;
            display: inline-block;
        }

        div.progressbar-container .progressbar-content {
            width: 365px;
            height: 6px;
            border: 0 none;
            background-color: #eeefef;
            position: relative;
            display: inline-block;
        }

        div.progressbar-container .progressbar-value {
            width: 0;
            overflow: hidden;
            background-color: #4acbd6;
            height: 100%;
            position: absolute;
            bottom: 0;
        }

        div.progressbar-container .progressbar-text,
        div.progressbar-container .progressbar-status {
            display: inline-block;
            width: 50px;
            text-align: right;
            font-size: 12px;
        }

        div.progressbar-container .progressbar-percentage {
            margin: 0 6px;
        }

        div.progressbar-container .progressbar-status {
            width: 370px;
            text-align: left;
            margin-top: 10px;
        }

        div.progressbar-container #upgrade-result {
            font-size: 12px;
            display: none;
            color: #dd6b6b;
        }

        #error-file {
            position: absolute;
            display: none;
            font-size: 12px;
            color: #dd6b6b;
        }

        #upgrade-form {
            margin-top: 25px;
            padding-left: 92px;
        }

        #upgrade-probar {
            display: none;
            margin-top: 15px;
        }

        #submit-btn {
            display: none;
        }
    </style>
    <title>boot</title>
</head>

<body id="boot-body">
    <div class="top" id="boot-main">
        <div class="top-header">
            <div class="top-header-wrap">
                <p id="tp-tag"></p>
                <p id="product-tag"></p>
            </div>
        </div>
        <div id="top-main">
            <div class="top-content">
                <div id="upgrade-container">
                    <div class="error-note-container">
                        <p id="error-note"></p>
                    </div>
                    <form action="f2.htm" method="post" id="upgrade-form" target="upgrade-iframe" enctype="multipart/form-data">
                        <div class="file-container" id="upgrade-file-container">
                            <div class="fieldlabel-wrap">
                                <label class="file-label" id="upgrade-label"></label>
                            </div>
                            <div class="file-wrap-outer" id="upgrade-file-wrap">
                                <div class="file-wrap">
                                    <div class="file-text-wrap">
                                        <span class="text-wrap"><label class="file-text text-text" id="upgrade-file-text"></label></span>
                                    </div>
                                    <div class="file-button-wrap">
                                        <button type="button" class="file-button" name="browse">
                                            <span class="text button-text" id="upgrade-text"></span>
                                        </button>
                                    </div>
                                    <input type="file" name="firmware" class="file-input" id="upgrade-input" />
                                    <div class="file-text-wrap2" id="file-text-hover"></div>
                                    <p id="error-file"></p>
                                </div>
                            </div>
                        </div>
                        <div class="button-container" id="upgrade-button-container">
                            <div class="button-wrap-outer">
                                <div class="button-wrap">
                                    <input type="submit" id="submit-btn" />
                                    <button type="button" class="button-button" id="upgrade-button" name="upgrade">
										<span class="text button-text"></span>
									</button>
                                </div>
                            </div>
                        </div>
                        <div class="progressbar-container" id="upgrade-probar">
                            <div class="progressbar-wrap-outer">
                                <div class="proressbar-wrap">
                                    <div class="progressbar-content" id="upgrade-probar-content">
                                        <div class="progressbar-value" id="upgrade-probar-value"></div>
                                    </div>
                                    <div class="progressbar-text">
                                        <span class="progressbar-percentage" id="upgrade-probar-percentage"></span>
                                    </div>
                                </div>
                                <div class="progressbar-status">
                                    <span class="progressbar-result-text" id="upgrade-result"></span>
                                </div>
                            </div>
                        </div>
                    </form>
                    <iframe id="frame" name="upgrade-iframe" src="" style="display:none" frameborder="0"></iframe>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        var doc_char = doc_char || {};
        doc_char = {
            "en_US": {
                "BOOT": {
                    MODEL: "PRODUCT_NAME",
                    TPLINK: "TP-LINK",
                    OPERATION_ERROR: "System error. The device cannot start up normally.",
                    UPGRADE_NOTE: "Please upgrade your device. You can download the firmware file from www.tp-link.com.",
                    UPGRADE_LABEL: "New Firmware File",
                    UPGRADE_TEXT: "Browse",
                    UPGRADE_BUTTON: "Upgrade",
                    FAILED: "Firmware upgrade failed.",
                    SUCCESSED: "Firmware upgrade success.",
                    INVALID_FILE: "Upgrade failed. The file is invalid.",
                    INCOMPATIBLE_FIRMWARE: "Upgrade failed. The firmware version is not compatible with the device.",
                    CONNECT_ERROR: "Upgrade failed. The computer is disconnected from the network.",
                    ERROR_FILE: "Invalid file type."
                }
            },
            "de_DE": {
                "BOOT": {
                    MODEL: "PRODUCT_NAME",
                    TPLINK: "TP-LINK",
                    OPERATION_ERROR: "Systemfehler. Das Gerät kann nicht ordnungsgemäß starten.",
                    UPGRADE_NOTE: "Bitte aktualisieren Sie Ihr Gerät. Die Firmwaredatei können Sie von www.tp-link.de herunterladen.",
                    UPGRADE_LABEL: "Datei mit neuer Firmware",
                    UPGRADE_TEXT: "Durchsuchen",
                    UPGRADE_BUTTON: "Upgrade",
                    FAILED: "Firmware-Upgrade fehlgeschlagen.",
                    SUCCESSED: "Firmware-Upgrade erfolgreich.",
                    INVALID_FILE: "Upgrade fehlgeschlagen. Ungültige Datei.",
                    INCOMPATIBLE_FIRMWARE: "Upgrade fehlgeschlagen. Diese Firmwareversion passt nicht zu Ihrem Gerät.",
                    CONNECT_ERROR: "Upgrade fehlgeschlagen. Ihr Computer hat keine Verbindung.",
                    ERROR_FILE: "Ungültiger Dateityp."
                }
            },
            "es_ES": {
                "BOOT": {
                    MODEL: "PRODUCT_NAME",
                    TPLINK: "TP-LINK",
                    OPERATION_ERROR: "System error. The device cannot start up normally.", // TODO
                    UPGRADE_NOTE: "Please upgrade your device. You can download the firmware file from www.tp-link.com.", // TODO
                    UPGRADE_LABEL: "FIRMWARE.NEWFILE", // FIRMWARE.NEWFILE
                    UPGRADE_TEXT: "OPERATION.BROWSE", // OPERATION.BROWSE
                    UPGRADE_BUTTON: "FIRMWARE.UPGRADE", // FIRMWARE.UPGRADE
                    FAILED: "Firmware upgrade failed.", // TODO
                    SUCCESSED: "Firmware upgrade success.", // TODO
                    INVALID_FILE: "Upgrade failed. The file is invalid.", // TODO
                    INCOMPATIBLE_FIRMWARE: "Upgrade failed. The firmware version is not compatible with the device.", // TODO
                    CONNECT_ERROR: "Upgrade failed. The computer is disconnected from the network.", // TODO
                    ERROR_FILE: "Invalid file type."
                }
            },
            "es_LA": {
                "BOOT": {
                    MODEL: "PRODUCT_NAME",
                    TPLINK: "TP-LINK",
                    OPERATION_ERROR: "Error del sistema. El dispositivo no puede iniciar normalmente.",
                    UPGRADE_NOTE: "Actualice su dispositivo. Puede descargar el archivo del firmware desde www.tp-link.es.",
                    UPGRADE_LABEL: "Archivo del Firmware Nuevo",
                    UPGRADE_TEXT: "Explorar",
                    UPGRADE_BUTTON: "Actualizar",
                    FAILED: "Error en la actualización del firmware.",
                    SUCCESSED: "Actualización de firmware exitosa.",
                    INVALID_FILE: "Error al actualizar. El archivo no es válido.",
                    INCOMPATIBLE_FIRMWARE: "Error al actualizar. La versión de firmware no es compatible con el dispositivo.",
                    CONNECT_ERROR: "Error al actualizar. El equipo está desconectado de la red.",
                    ERROR_FILE: "Tipo de archivo invalido."
                }
            },
            "fr_FR": {
                "BOOT": {
                    MODEL: "PRODUCT_NAME",
                    TPLINK: "TP-LINK",
                    OPERATION_ERROR: "Erreur système, L'appareil ne peut pas démarrer normalement.",
                    UPGRADE_NOTE: "Merci de mettre à jour votre appareil en téléchargeant le firmware disponible sur www.tp-link.fr",
                    UPGRADE_LABEL: "Fichier de mise à jour",
                    UPGRADE_TEXT: "Naviguer",
                    UPGRADE_BUTTON: "Mettre à jour",
                    FAILED: "La mise à jour firmware a échoué.",
                    SUCCESSED: "La mise à jour firmware a réussi.",
                    INVALID_FILE: "Echec mise à jour. Le fichier est invalide.",
                    INCOMPATIBLE_FIRMWARE: "Echec mise à jour. La version du firmware n'est pas compatible avec l'appareil.",
                    CONNECT_ERROR: "Echec mise à jour. L'ordinateur est déconnecté du réseau.",
                    ERROR_FILE: "Type de fichier invalide."
                }
            },
            "it_IT": {
                "BOOT": {
                    MODEL: "PRODUCT_NAME",
                    TPLINK: "TP-LINK",
                    OPERATION_ERROR: "Errore di sistema. Il dispositivo non può avviarsi normalmente.",
                    UPGRADE_NOTE: "Aggiornate il vostro dispositivo. Potete scaricare il firmware da www.tp-link.it.",
                    UPGRADE_LABEL: "Nuovo Firmware",
                    UPGRADE_TEXT: "Cerca",
                    UPGRADE_BUTTON: "Aggiornamento",
                    FAILED: "Aggiornamento firmware fallito.",
                    SUCCESSED: "Aggiornamento firmware avvenuto con successo.",
                    INVALID_FILE: "Aggiornamento fallito. Il file non è valido.",
                    INCOMPATIBLE_FIRMWARE: "Aggiornamento fallito. La versione del firmware non è compatibile con il dispositivo.",
                    CONNECT_ERROR: "Aggiornamento fallito. Il computer non è connesso in rete.",
                    ERROR_FILE: "Il tipo di file non è valido."
                }
            },
            "jp_JP": {
                "BOOT": {
                    MODEL: "PRODUCT_NAME",
                    TPLINK: "TP-LINK",
                    OPERATION_ERROR: "システムエラー。 デバイスは正常に起動できません。",
                    UPGRADE_NOTE: "デバイスをアップグレードしてください。 ファームウェアのファイルは、www.tp-link.comからダウンロードできます。",
                    UPGRADE_LABEL: "新しいファームウェア ファイル",
                    UPGRADE_TEXT: "参照",
                    UPGRADE_BUTTON: "アップグレード",
                    FAILED: "ファームウェアのアップグレードに失敗しました。",
                    SUCCESSED: "ファームウェアのアップグレードに成功しました。",
                    INVALID_FILE: "アップグレードに失敗しました。 ファイルが無効です。",
                    INCOMPATIBLE_FIRMWARE: "アップグレードに失敗しました。 ファームウェアのバージョンがデバイスと一致しません。",
                    CONNECT_ERROR: "アップグレードに失敗しました。 コンピュータがネットワークに接続されていません。",
                    ERROR_FILE: "無効なファイルタイプです。"
                }
            },
            "ko_KR": {
                "BOOT": {
                    MODEL: "PRODUCT_NAME",
                    TPLINK: "TP-LINK",
                    OPERATION_ERROR: "시스템 오류. 장치를 정상적으로 시작할 수 없습니다.",
                    UPGRADE_NOTE: "기기를 업그레이드하십시오. www.tp-link.co.kr 에서 펌웨어 파일을 다운로드 할 수 있습니다.",
                    UPGRADE_LABEL: "새 펌웨어 파일",
                    UPGRADE_TEXT: "찾아보기",
                    UPGRADE_BUTTON: "업그레이드",
                    FAILED: "펌웨어 업그레이드에 실패했습니다.",
                    SUCCESSED: "펌웨어 업그레이드 성공합니다.",
                    INVALID_FILE: "업그레이드가 실패했습니다. 파일이 유효하지 않습니다.",
                    INCOMPATIBLE_FIRMWARE: "업그레이드가 실패했습니다. 펌웨어 버전이 장치와 호환되지 않습니다.",
                    CONNECT_ERROR: "업그레이드가 실패했습니다. 컴퓨터가 네트워크에서 연결이 끊어졌습니다.",
                    ERROR_FILE: "잘못된 파일 형식입니다."
                }
            },
            "pt_BR": {
                "BOOT": {
                    MODEL: "PRODUCT_NAME",
                    TPLINK: "TP-LINK",
                    OPERATION_ERROR: "Erro de sistema. O dispositivo não pode iniciar normalmente.",
                    UPGRADE_NOTE: "Favor atualizar seu dispositivo. Você pode baixar a firmware do site www.tp-link.com.br.",
                    UPGRADE_LABEL: "Novo Arquivo Firmware",
                    UPGRADE_TEXT: "Buscar",
                    UPGRADE_BUTTON: "Atualizar",
                    FAILED: "Falha na atualização de firmware.",
                    SUCCESSED: "Atualização de firmware com sucesso.",
                    INVALID_FILE: "Falha ao fazer upgrade. O arquivo é inválido.",
                    INCOMPATIBLE_FIRMWARE: "Falha ao fazer upgrade. A versão de firmware não é compatível com o dispositivo.",
                    CONNECT_ERROR: "Falha ao fazer upgrade. O computador está desconectado da rede.",
                    ERROR_FILE: "Tipo de arquivo inválido."
                }
            },
            "pt_PT": {
                "BOOT": {
                    MODEL: "PRODUCT_NAME",
                    TPLINK: "TP-LINK",
                    OPERATION_ERROR: "System error. The device cannot start up normally.", // TODO
                    UPGRADE_NOTE: "Please upgrade your device. You can download the firmware file from www.tp-link.com.", // TODO
                    UPGRADE_LABEL: "FIRMWARE.NEWFILE", // FIRMWARE.NEWFILE
                    UPGRADE_TEXT: "OPERATION.BROWSE", // OPERATION.BROWSE
                    UPGRADE_BUTTON: "FIRMWARE.UPGRADE", // FIRMWARE.UPGRADE
                    FAILED: "Firmware upgrade failed.", // TODO
                    SUCCESSED: "Firmware upgrade success.", // TODO
                    INVALID_FILE: "Upgrade failed. The file is invalid.", // TODO
                    INCOMPATIBLE_FIRMWARE: "Upgrade failed. The firmware version is not compatible with the device.", // TODO
                    CONNECT_ERROR: "Upgrade failed. The computer is disconnected from the network.", // TODO
                    ERROR_FILE: "Invalid file type."
                }
            },
            "nl_NL": {
                "BOOT": {
                    MODEL: "PRODUCT_NAME",
                    TPLINK: "TP-LINK",
                    OPERATION_ERROR: "System error. The device cannot start up normally.", // TODO
                    UPGRADE_NOTE: "Please upgrade your device. You can download the firmware file from www.tp-link.com.", // TODO
                    UPGRADE_LABEL: "FIRMWARE.NEWFILE", // FIRMWARE.NEWFILE
                    UPGRADE_TEXT: "OPERATION.BROWSE", // OPERATION.BROWSE
                    UPGRADE_BUTTON: "FIRMWARE.UPGRADE", // FIRMWARE.UPGRADE
                    FAILED: "Firmware upgrade failed.", // TODO
                    SUCCESSED: "Firmware upgrade success.", // TODO
                    INVALID_FILE: "Upgrade failed. The file is invalid.", // TODO
                    INCOMPATIBLE_FIRMWARE: "Upgrade failed. The firmware version is not compatible with the device.", // TODO
                    CONNECT_ERROR: "Upgrade failed. The computer is disconnected from the network.", // TODO
                    ERROR_FILE: "Invalid file type."
                }
            }
        }

        var lan_type = "LAN_TYPE";
        var _char = doc_char[lan_type];

        window.onload = function() {
            var getObjById = function(id) {
                return document.getElementById(id);
            };
            var addClass = function(obj, _class) {
                var className = obj.className;
                classNameArr = className.split(" ");
                for (var i = 0, len = classNameArr.length; i < len; i++) {
                    if (classNameArr[i] === _class) {
                        return;
                    }
                }
                obj.className = obj.className + " " + _class;
            };
            var removeClass = function(obj, _class) {
                obj.className = obj.className.replace(" " + _class, "");
                obj.className = obj.className.replace(_class, "");
            };
            var show = function(obj, style) {
                var _css = style ? "display: " + style : "display: block";
                setCss(obj, _css);
            };
            var hide = function(obj) {
                setCss(obj, "display: none");
            }
            var getCss = function(obj, key) {
                return obj.currentStyle ? obj.currentStyle[key] : obj.ownerDocument.defaultView.getComputedStyle(
                    obj, null)[key];
            };
            var setCss = function(obj, _css) {
                obj.style.cssText = _css;
            };
            var setProbarValue = function(contentObj, valueObj, percentage) {
                var totalWidth = parseInt(getCss(contentObj, "width"));
                var valWidth = percentage * totalWidth / 100;
                setCss(valueObj, "width: " + valWidth + "px")
            };
            var stopEventPropagation = function(event) {
                var event = event || window.event;
                if (event.stopProragation) {
                    event.stopPropagation();
                } else {
                    event.cancelBubble = true;
                }
            };
            var closeSearch = function() {
                var xmlhttp;
                if (window.XMLHttpRequest) {
                    xmlhttp = new XMLHttpRequest();
                } else {
                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                }
                xmlhttp.abort();
                mystop();
            }

            var mystop = function() {
                if (!!(window.attachEvent && !window.opera)) {
                    document.execCommand("stop");
                } else {
                    window.stop();
                }
            }

            getObjById("tp-tag").innerHTML = _char.BOOT.TPLINK;
            getObjById("product-tag").innerHTML = _char.BOOT.MODEL;
            getObjById("error-note").innerHTML = _char.BOOT.OPERATION_ERROR + "<br/>" + _char.BOOT.UPGRADE_NOTE;
            getObjById("error-file").innerHTML = _char.BOOT.ERROR_FILE;
            getObjById("upgrade-label").innerHTML = _char.BOOT.UPGRADE_LABEL + ":";
            getObjById("upgrade-text").innerHTML = _char.BOOT.UPGRADE_TEXT;
            getObjById("upgrade-button").innerHTML = _char.BOOT.UPGRADE_BUTTON;

            var upgrade_form = getObjById("upgrade-form");
            var upgrade_file_wrap = getObjById("upgrade-file-wrap");
            var upgrade_input = getObjById("upgrade-input");
            var upgrade_button = getObjById("upgrade-button");
            var submit_btn = getObjById("submit-btn");
            var upgrade_probar = getObjById("upgrade-probar");
            var upgrade_probar_value = getObjById("upgrade-probar-value");
            var upgrade_probar_percentage = getObjById("upgrade-probar-percentage");
            var upgrade_probar_content = getObjById("upgrade-probar-content");
            var upgrade_probar_result = getObjById("upgrade-result");
            var upgrade_iframe = getObjById("frame");
            var file_text_hover = getObjById("file-text-hover");
            var invalid_file_type = getObjById("error-file");

            var upgrade_id = false;
            var currentWidth = 0;
            var currentPercentage = 0;

            upgrade_button.setAttribute("disabled", "disabled");
            addClass(upgrade_button, "disabled");

            upgrade_file_wrap.onclick = function() {
                upgrade_input.click();
            }
            upgrade_input.onchange = function() {
                var value = upgrade_input.value;
                var p = /.+(?=\\)/g;
                var v = value.toString().match(p);
                if (v && v[0] && v[0].length) {
                    v = value.substring(v[0].length + 1);
                } else {
                    v = value;
                };
                getObjById("upgrade-file-text").innerHTML = v;

                var postFix = v.split(".");
                if (!(postFix.length > 1 && postFix[postFix.length - 1] === "bin")) {
                    show(invalid_file_type);
                    upgrade_button.setAttribute("disabled", "disabled");
                    addClass(upgrade_button, "disabled");
                } else {
                    hide(invalid_file_type);
                    upgrade_button.removeAttribute("disabled");
                    removeClass(upgrade_button, "disabled");
                }
            }
            upgrade_button.onclick = function() {
                hide(upgrade_probar_result);
                var value = upgrade_input.value;
                if (!value) {
                    return false;
                }
                upgrade_button.setAttribute("disabled", "disabled");
                addClass(upgrade_button, "disabled");
                if (upgrade_id) {
                    clearInterval(upgrade_id);
                    upgrade_id = false;
                }
                upgrade_form.submit();
                setCss(upgrade_probar_value, "width: 0");
                upgrade_probar_percentage.innerHTML = "0%";
                currentWidth = 0;
                currentPercentage = 0;
                show(upgrade_probar, "inline-block");
                upgrade_id = setInterval(function() {
                    currentWidth += 3;
                    currentPercentage = (currentWidth * 100 / 365).toFixed(1);
                    if (currentPercentage >= 40) {
                        upgrade_probar_result.innerHTML = _char.BOOT.FAILED;
                        show(upgrade_probar_result, "inline-block");
                        upgrade_button.removeAttribute("disabled");
                        removeClass(upgrade_button, "disabled");
                        clearInterval(upgrade_id);
                        closeSearch();
                    }
                    upgrade_probar_percentage.innerHTML = currentPercentage + "%";
                    setProbarValue(upgrade_probar_content, upgrade_probar_value, currentPercentage);
                }, 860);
            }
            file_text_hover.onclick = function(e) {
                stopEventPropagation(e);
            }
            if (upgrade_iframe.attachEvent) {
                upgrade_iframe.attachEvent("onload", function() {
                    onLoadCallback();
                });
            } else {
                upgrade_iframe.onload = function() {
                    onLoadCallback();
                }
            }
            var onLoadCallback = function() {
                clearInterval(upgrade_id);
                upgrade_id = false;
                var doc;
                try {
                    doc = document.getElementById("frame").contentDocument.body.textContent || document.getElementById(
                        "frame").contentDocument.body.innerHTML;
                } catch (error) {
                    upgrade_probar_result.innerHTML = _char.BOOT.CONNECT_ERROR;
                    show(upgrade_probar_result, "inline-block");
                    upgrade_button.removeAttribute("disabled");
                    removeClass(upgrade_button, "disabled");
                    return;
                };
                var data = !doc ? "" : JSON.parse(doc);
                if (typeof(data) == "object" && data.success) {
                    currentWidth = 146;
                } else {
                    switch (data.errorcode) {
                        case "-2":
                            upgrade_probar_result.innerHTML = _char.BOOT.INVALID_FILE;
                            break;
                        case "-3":
                        case "-4":
                        case "-5":
                        case "-6":
                            upgrade_probar_result.innerHTML = _char.BOOT.INCOMPATIBLE_FIRMWARE;
                            break;
                        default:
                            upgrade_probar_result.innerHTML = _char.BOOT.FAILED;
                            break;
                    }
                    upgrade_probar_percentage.innerHTML = "40%";
                    setProbarValue(upgrade_probar_content, upgrade_probar_value, 40);
                    show(upgrade_probar_result, "inline-block");
                    upgrade_button.removeAttribute("disabled");
                    removeClass(upgrade_button, "disabled");
                    return false;
                }

                upgrade_id = setInterval(function() {
                    currentWidth += 3;
                    currentPercentage = (currentWidth * 100 / 365).toFixed(1);
                    if (currentPercentage >= 100) {
                        currentPercentage = 100;
                        upgrade_probar_result.innerHTML = _char.BOOT.SUCCESSED;
                        show(upgrade_probar_result, "inline-block");
                        //upgrade_button.removeAttribute("disabled");
                        //removeClass(upgrade_button,"disabled");
                        clearInterval(upgrade_id);
                        location.href = "/";
                    }
                    upgrade_probar_percentage.innerHTML = currentPercentage + "%";
                    setProbarValue(upgrade_probar_content, upgrade_probar_value, currentPercentage);
                }, 822);
            }
        }
    </script>
</body>

</html>
